[TOC]

### servlet初始化参数ServletConfig

#### DD部署文件（web.xml）

```xml
<web-app>
    <servlet>
        <servlet-name>testServlet</servlet-name>
        <servlet-class>com.bior.TestServlet</servlet-class>

        <init-param>
            <param-name>adminEmail</param-name>
            <param-value>biorson@163.com</param-value>
        </init-param>
        
        <init-param>
            <param-name>mainEmail</param-name>
            <param-value>main@163.com</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>testServlet</servlet-name>
        <url-pattern>test.do</url-pattern>
    </servlet-mapping>
</web-app>
```

#### Servlet代码

```java
public class TestServlet extends HttpServlet{
    
    public void doPost(HttpServeltRequest request,HttpServletResponse response)throws IOException,ServletException{
        
        ServletConfig config = request.getServletConfig();
        String adminEmail = config.getInitParameter("adminEamil");
    }
}
```



* 在servlet==初始化==之前不能使用servlet初始化参数，即不能在构造函数调用init(ServletConfig)
* 容器初始化一个servlet时，会为这个servlet创建一个==唯一的ServletConfig==
* 容器从DD“读出”servlet初始化参数，并把这些参数交给ServletConfig，然后把ServletConfig传递给servlet的init()方法
* servlet初始化参数只能读取一次，就是在容器初始化servlet的时候，此后不再读初始化参数，除非重新部署servlet





### 上下文初始化参数ServletContext

#### DD部署文件（web.xml）

```xml
<web-app>
	<servlet>
    	...
    </servlet>
    
    <context-param>
    	<param-name>adminEmail</param-name>
        <param-value>admin@163.com</param-value>
    </context-param>

</web-app>
```

#### servlet代码

```java
public class TestServlet extends HttpServlet{
    
    public void doPost(HttpServeltRequest request,HttpServletResponse response)throws IOException,ServletException{
        
        ServletContext context = request.getServletContext();
        String adminEmail = context.getInitParameter("adminEamil");
    }
}
```



### 两者的区别

|        ==ServletConfig==         |       ==ServletContext==        |
| :------------------------------: | :-----------------------------: |
| 每一个servlet有一个ServletConfig | 每个Web应用有一个ServletContext |
|                                  |                                 |
|                                  |                                 |

